#  ë©”ì¼ ë°œì†¡ í…ŒìŠ¤íŠ¸ ëª¨ë“œ ì„¤ì • ê°€ì´ë“œ

## ğŸ¯ ì•ˆì „í•œ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ 3ë‹¨ê³„ ì„¤ì •

---

##  Step 1: application.yaml ì„¤ì • ì¶”ê°€

### ğŸ“ ìœ„ì¹˜: `temp/app-api/src/main/resources/application.yaml`

```yaml
notice:
  mail:
    #  í…ŒìŠ¤íŠ¸ ëª¨ë“œ (ì‹¤ì œ ë©”ì¼ ë°œì†¡ ì•ˆí•¨)
    test-mode: true
    
    #  í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ëª¨ë“œ (íŠ¹ì • ì´ë©”ì¼ë§Œ í—ˆìš©)
    whitelist-mode: false
    
    #  í—ˆìš©ëœ ì´ë©”ì¼ ëª©ë¡
    whitelist-emails:
      - your.email@company.com
      - test.user@company.com
    
    #  í…ŒìŠ¤íŠ¸ìš© ëŒ€ì²´ ì´ë©”ì¼ (ì„ íƒì‚¬í•­)
    test-recipient-email: test@company.com
```

---

##  í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ì™„ì „ ì•ˆì „ í…ŒìŠ¤íŠ¸ (ì¶”ì²œ) â­

**ì„¤ì •:**
```yaml
notice:
  mail:
    test-mode: true              # ì‹¤ì œ ë°œì†¡ ì•ˆí•¨
    whitelist-mode: false
```

**ë™ì‘:**
-  ì‹¤ì œ ë©”ì¼ ë°œì†¡ **ì•ˆë¨**
-  ë¡œê·¸ë¡œë§Œ ëª¨ë“  ì •ë³´ í™•ì¸
-  ë°ì´í„°ë² ì´ìŠ¤ì—ëŠ” ì •ìƒ ì €ì¥ (ë°œì†¡ ì´ë ¥, ìˆ˜ì‹ ì ê¸°ë¡)
-  ê³µì§€ ìƒíƒœëŠ” SENTë¡œ ë³€ê²½

**ë¡œê·¸ ì˜ˆì‹œ:**
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 [í…ŒìŠ¤íŠ¸ ëª¨ë“œ] ë©”ì¼ ë°œì†¡ ì •ë³´
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 ê³µì§€ ID: 1
 ê³µì§€ ì œëª©: ì‹œìŠ¤í…œ ì ê²€ ì•ˆë‚´
 ì¤‘ìš”ë„: L2
 ê³µì§€ ìƒíƒœ: APPROVED
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 ë°œì‹ ì (FROM): admin@company.com
 ë°œì‹ ì (SENDER): admin@company.com
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 ìˆ˜ì‹ ì (TO): 15 ëª…
 ìˆ˜ì‹ ì ëª©ë¡:
   âœ‰ï¸ user1@company.com
   âœ‰ï¸ user2@company.com
   âœ‰ï¸ user3@company.com
   ... (ê³„ì†)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 ì°¸ì¡° (CC): 1 ëª…
    approver@company.com
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ ì œëª©: ì‹œìŠ¤í…œ ì ê²€ ì•ˆë‚´
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 ë³¸ë¬¸ ë‚´ìš© (ì²˜ìŒ 500ì):
<html><body>ì‹œìŠ¤í…œ ì ê²€ìœ¼ë¡œ ì¸í•´...</body></html>
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 ì²¨ë¶€íŒŒì¼: 2 ê°œ
    manual.pdf (1234567 bytes)
    guide.xlsx (987654 bytes)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 í…ŒìŠ¤íŠ¸ ëª¨ë“œì´ë¯€ë¡œ ì‹¤ì œ ë©”ì¼ì€ ë°œì†¡ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤!
 ì‹¤ì œ ë°œì†¡ì„ ì›í•˜ì‹œë©´ application.yamlì—ì„œ
 notice.mail.test-mode: false ë¡œ ì„¤ì •í•˜ì„¸ìš”
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 [í…ŒìŠ¤íŠ¸ ëª¨ë“œ] ì‹¤ì œ ë©”ì¼ì€ ë°œì†¡ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤ 
```

---

### ì‹œë‚˜ë¦¬ì˜¤ 2: í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ í…ŒìŠ¤íŠ¸

**ì„¤ì •:**
```yaml
notice:
  mail:
    test-mode: false             # ì‹¤ì œ ë°œì†¡ í•¨
    whitelist-mode: true         # íŠ¹ì • ì´ë©”ì¼ë§Œ í—ˆìš©
    whitelist-emails:
      - your.email@company.com   # ë³¸ì¸ ì´ë©”ì¼ë§Œ ì¶”ê°€
```

**ë™ì‘:**
-  ì‹¤ì œ ë©”ì¼ ë°œì†¡ **í•¨**
-  í•˜ì§€ë§Œ ë³¸ì¸ ì´ë©”ì¼ë¡œ**ë§Œ** ë°œì†¡
-  ë‹¤ë¥¸ ì‚¬ëŒì—ê²ŒëŠ” ë°œì†¡ ì•ˆë¨

**ë¡œê·¸ ì˜ˆì‹œ:**
```
 ìˆ˜ì‹  ëŒ€ìƒì ìˆ˜ì§‘ ì™„ë£Œ: noticeId=1, count=15
 í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ëª¨ë“œ: ì›ë³¸ 15ëª… â†’ í•„í„°ë§ í›„ 1ëª…
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 ì›ë³¸ ìˆ˜ì‹ ì (TO): 15 ëª…
 ì›ë³¸ ìˆ˜ì‹ ì ëª©ë¡:
   - user1@company.com
   - user2@company.com
   ... (ì „ì²´ ëª©ë¡)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 í•„í„°ë§ í›„ ìˆ˜ì‹ ì (TO): 1 ëª…
 í•„í„°ë§ í›„ ìˆ˜ì‹ ì ëª©ë¡:
   âœ‰ï¸ your.email@company.com
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 [ì‹¤ì œ ë°œì†¡] ë©”ì¼ ë°œì†¡ ì‹¤í–‰ ì¤‘...
 [ì‹¤ì œ ë°œì†¡] ë©”ì¼ ë°œì†¡ ì™„ë£Œ
```

---

### ì‹œë‚˜ë¦¬ì˜¤ 3: ì‹¤ì œ ìš´ì˜ (ëª¨ë“  í…ŒìŠ¤íŠ¸ ì™„ë£Œ í›„)

**ì„¤ì •:**
```yaml
notice:
  mail:
    test-mode: false             # ì‹¤ì œ ë°œì†¡
    whitelist-mode: false        # ëª¨ë“  ì´ë©”ì¼ í—ˆìš©
```

**ë™ì‘:**
-  ì‹¤ì œ ë©”ì¼ ë°œì†¡
-  ëª¨ë“  ìˆ˜ì‹ ìì—ê²Œ ë°œì†¡

---

##  íŒŒì¼ ë°°ì¹˜ ê°€ì´ë“œ

### 1. MailTestProperty.java ë°°ì¹˜
```
temp/app-api/src/main/java/kr/co/koreazinc/app/configuration/
â””â”€â”€ MailTestProperty.java
```

### 2. NoticeMailService.java êµì²´
```
temp/app-api/src/main/java/kr/co/koreazinc/app/service/notice/
â””â”€â”€ NoticeMailService.java  (ê¸°ì¡´ íŒŒì¼ â†’ NoticeMailService_WithTestMode.javaë¡œ êµì²´)
```

### 3. application.yaml ì„¤ì • ì¶”ê°€
```
temp/app-api/src/main/resources/
â””â”€â”€ application.yaml
```

---

## ğŸ“ í…ŒìŠ¤íŠ¸ ì ˆì°¨ (ì¶”ì²œ)

### 1ë‹¨ê³„: ì™„ì „ ì•ˆì „ í…ŒìŠ¤íŠ¸
```yaml
test-mode: true
whitelist-mode: false
```
- ë¡œê·¸ë§Œ í™•ì¸
- ë°œì†¡ ëŒ€ìƒì í™•ì¸
- ë©”ì¼ ë‚´ìš© í™•ì¸
- ì²¨ë¶€íŒŒì¼ í™•ì¸

### 2ë‹¨ê³„: ë³¸ì¸ì—ê²Œë§Œ ë°œì†¡ í…ŒìŠ¤íŠ¸
```yaml
test-mode: false
whitelist-mode: true
whitelist-emails:
  - your.email@company.com
```
- ì‹¤ì œ ë©”ì¼ ìˆ˜ì‹  í™•ì¸
- ë©”ì¼ í¬ë§· í™•ì¸
- ì²¨ë¶€íŒŒì¼ ë‹¤ìš´ë¡œë“œ í™•ì¸

### 3ë‹¨ê³„: ì†Œê·œëª¨ ê·¸ë£¹ í…ŒìŠ¤íŠ¸
```yaml
test-mode: false
whitelist-mode: true
whitelist-emails:
  - your.email@company.com
  - colleague1@company.com
  - colleague2@company.com
```
- íŒ€ì›ë“¤ê³¼ í•¨ê»˜ í…ŒìŠ¤íŠ¸
- ëª¨ë“  ê¸°ëŠ¥ ê²€ì¦

### 4ë‹¨ê³„: ì‹¤ì œ ìš´ì˜
```yaml
test-mode: false
whitelist-mode: false
```
- ëª¨ë“  ì‚¬ìš©ìì—ê²Œ ë°œì†¡

---

##  ì£¼ì˜ì‚¬í•­

### 1. test-mode ì„¤ì • í™•ì¸
```bash
# ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œ ë¡œê·¸ í™•ì¸
[INFO] MailTestProperty initialized
[INFO] Test Mode: true
[INFO] Whitelist Mode: false
```

### 2. í™˜ê²½ë³„ ì„¤ì •

#### ê°œë°œ í™˜ê²½ (application-dev.yaml)
```yaml
notice:
  mail:
    test-mode: true
```

#### ìš´ì˜ í™˜ê²½ (application-prod.yaml)
```yaml
notice:
  mail:
    test-mode: false
```

### 3. ì‹¤ìˆ˜ ë°©ì§€ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] test-mode ì„¤ì • í™•ì¸
- [ ] ë¡œê·¸ì—ì„œ ë°œì†¡ ëŒ€ìƒì í™•ì¸
- [ ] í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ì´ë©”ì¼ì´ ë³¸ì¸ ê²ƒì¸ì§€ í™•ì¸
- [ ] í…ŒìŠ¤íŠ¸ ë©”ì¼ ìˆ˜ì‹  í›„ ì‹¤ì œ ìš´ì˜ ì „í™˜

---

## ğŸ¯ ì¶”ê°€ ê¸°ëŠ¥

### íŠ¹ì • ë„ë©”ì¸ë§Œ í—ˆìš©
```yaml
notice:
  mail:
    whitelist-mode: true
    whitelist-emails:
      - test1@test.com
      - test2@test.com
      - "*@testdomain.com"  # íŠ¹ì • ë„ë©”ì¸ ì „ì²´ í—ˆìš©
```

### í™˜ê²½ ë³€ìˆ˜ë¡œ ì œì–´
```yaml
notice:
  mail:
    test-mode: ${MAIL_TEST_MODE:true}
    whitelist-mode: ${MAIL_WHITELIST_MODE:false}
```

```bash
# ì‹¤í–‰ ì‹œ
java -jar app.jar --MAIL_TEST_MODE=false
```

---

## ğŸ” ë¡œê·¸ ë ˆë²¨ ì¡°ì •

### application.yamlì— ë¡œê·¸ ë ˆë²¨ ì¶”ê°€
```yaml
logging:
  level:
    kr.co.koreazinc.app.service.notice.NoticeMailService: DEBUG
```

ì´ë ‡ê²Œ í•˜ë©´ ë” ìƒì„¸í•œ ë¡œê·¸ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤!

---

## ğŸ’¡ íŒ

1. **ì²« í…ŒìŠ¤íŠ¸ëŠ” í•­ìƒ test-mode: trueë¡œ!**
2. **ë³¸ì¸ ì´ë©”ì¼ë¡œë§Œ ë¨¼ì € í…ŒìŠ¤íŠ¸**
3. **ë¡œê·¸ë¥¼ ê¼­ í™•ì¸**
4. **ì‹¤ì œ ìš´ì˜ ì „ì— ë™ë£Œì™€ í•¨ê»˜ ê²€ì¦**

---

## ğŸ†˜ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### Q: ë¡œê·¸ê°€ ì•ˆ ë³´ì—¬ìš”
```yaml
logging:
  level:
    kr.co.koreazinc.app.service.notice: DEBUG
```

### Q: í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ê°€ ì ìš© ì•ˆë¼ìš”
- MailTestPropertyê°€ ì œëŒ€ë¡œ ì£¼ì…ë˜ì—ˆëŠ”ì§€ í™•ì¸
- @Component ì–´ë…¸í…Œì´ì…˜ í™•ì¸
- application.yaml ê²½ë¡œ í™•ì¸

### Q: í…ŒìŠ¤íŠ¸ ëª¨ë“œì¸ë°ë„ ë©”ì¼ì´ ë‚˜ê°”ì–´ìš”
- ì„¤ì • íŒŒì¼ ë‹¤ì‹œ í™•ì¸
- ì• í”Œë¦¬ì¼€ì´ì…˜ ì¬ì‹œì‘
- ë¡œê·¸ì—ì„œ test-mode ê°’ í™•ì¸

---

ì´ì œ ì•ˆì „í•˜ê²Œ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”! 
