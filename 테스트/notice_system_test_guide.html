<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>공지사항 관리 시스템 - 테스트 시나리오 뷰어</title>
<style>
  :root {
    --text: #e8eefc;
    --muted: #a9b6d3;
    --border: rgba(255,255,255,0.12);
  }
  body {
    margin: 0;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
    background: linear-gradient(180deg, #081021, #070c18 40%, #050915);
    color: var(--text);
  }
  header {
    position: sticky;
    top: 0;
    backdrop-filter: blur(10px);
    background: rgba(7,12,24,0.65);
    border-bottom: 1px solid var(--border);
    padding: 16px 18px;
    z-index: 10;
  }
  header h1 { margin: 0; font-size: 18px; letter-spacing: 0.2px; }
  header .sub { margin-top: 6px; color: var(--muted); font-size: 13px; }
  .wrap {
    display: grid;
    grid-template-columns: 280px 1fr;
    gap: 18px;
    padding: 18px;
    max-width: 1400px;
    margin: 0 auto;
  }
  nav {
    position: sticky;
    top: 86px;
    align-self: start;
    background: rgba(15,26,48,0.7);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 14px;
  }
  nav a {
    display: block;
    color: var(--muted);
    text-decoration: none;
    padding: 10px 10px;
    border-radius: 10px;
    border: 1px solid transparent;
    margin-bottom: 8px;
  }
  nav a:hover {
    color: var(--text);
    border-color: var(--border);
    background: rgba(255,255,255,0.04);
  }
  main section {
    background: rgba(15,26,48,0.55);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 16px 16px;
    margin-bottom: 18px;
  }
  h2 { margin: 0 0 10px 0; font-size: 18px; }
  h3 { margin: 6px 0 10px 0; font-size: 14px; color: var(--text); }
  p { margin: 8px 0; color: var(--muted); line-height: 1.55; }
  .grid2 { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
  @media (max-width: 980px) {
    .wrap { grid-template-columns: 1fr; }
    nav { position: relative; top: 0; }
    .grid2 { grid-template-columns: 1fr; }
  }
  table {
    width: 100%;
    border-collapse: collapse;
    overflow: hidden;
    border-radius: 12px;
    border: 1px solid var(--border);
  }
  th, td {
    padding: 10px 10px;
    border-bottom: 1px solid var(--border);
    vertical-align: top;
    font-size: 13px;
  }
  th {
    text-align: left;
    background: rgba(74,163,255,0.12);
    color: var(--text);
    position: sticky;
    top: 0;
  }
  tr:hover td { background: rgba(255,255,255,0.03); }
  code, pre {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
  }
  pre {
    margin: 10px 0 0 0;
    padding: 12px;
    background: rgba(0,0,0,0.25);
    border: 1px solid var(--border);
    border-radius: 12px;
    overflow: auto;
    color: #dbe7ff;
    white-space: pre-wrap;
    word-break: break-word;
  }
  .toolbar { display: flex; gap: 10px; flex-wrap: wrap; margin: 10px 0 12px; }
  .input {
    flex: 1 1 320px;
    background: rgba(255,255,255,0.06);
    border: 1px solid var(--border);
    color: var(--text);
    padding: 10px 12px;
    border-radius: 12px;
    outline: none;
  }
  .pill {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 12px;
    border-radius: 999px;
    border: 1px solid var(--border);
    background: rgba(255,255,255,0.04);
    color: var(--muted);
    cursor: pointer;
    user-select: none;
    font-size: 12px;
  }
  .pill.active {
    border-color: rgba(74,163,255,0.6);
    color: var(--text);
    background: rgba(74,163,255,0.12);
  }
  details.card {
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 10px 12px;
    background: rgba(255,255,255,0.03);
    margin: 10px 0;
  }
  details.card > summary {
    cursor: pointer;
    list-style: none;
    font-weight: 600;
    color: var(--text);
  }
  details.card > summary::-webkit-details-marker { display: none; }
  .badge {
    display: inline-block;
    padding: 4px 10px;
    border-radius: 999px;
    font-size: 12px;
    border: 1px solid var(--border);
    color: var(--muted);
    background: rgba(255,255,255,0.04);
    margin-left: 8px;
  }
  footer { padding: 20px 18px 40px; color: var(--muted); text-align: center; }
</style>
</head>
<body>
<header>
  <h1>공지사항 관리 시스템: 테스트 시나리오 & 흐름도 뷰어</h1>
  <div class="sub">통합가이드 · 상세 흐름도 · 테스트 시나리오 상세 (생성일 2026-02-05, v1.0)</div>
</header>

<div class="wrap">
  <nav>
    <a href="#overview">개요</a>
    <a href="#dpr">핵심 정책 (DPR)</a>
    <a href="#arch">아키텍처/구성</a>
    <a href="#flows">주요 프로세스(요약)</a>
    <a href="#tcs">테스트 케이스(17)</a>
    <a href="#seed">Seed 데이터 / 요청 예시</a>
    <a href="#ts">트러블슈팅</a>
  </nav>

  <main>
    <section id="overview">
      <h2>개요</h2>
      <p>md로 분산된 3개 문서를 한 페이지에서 빠르게 찾을 수 있도록 정리했습니다. 표로 만들 수 있는 건 표로, 흐름/다이어그램은 접이식 카드 형태로 넣었습니다.</p>
      <div class="grid2">
        <div>
          <details class="card" open>
            <summary>시스템 목적<span class="badge">Goal</span></summary>
            <pre>무분별한 공지 메일 발송 방지 → 승인 기반 체계 수립
예약/즉시 발송 선택 → Outlook 캘린더 자동 연동 → 발송 결과 추적 및 분석</pre>
          </details>
        </div>
        <div>
          <details class="card" open>
            <summary>상태 흐름(핵심)<span class="badge">Status</span></summary>
            <pre>DRAFT → PENDING → APPROVED/REJECTED
SCHEDULED → SENT → COMPLETED
(실패 시: FAILED / CALENDAR_FAILED 등)</pre>
          </details>
        </div>
      </div>
    </section>

    <section id="dpr">
      <h2>핵심 정책 (DPR)</h2>
      <p>정책과 연결된 테스트 케이스를 바로 매칭할 수 있도록 정리했습니다.</p>
      <table id="tblDPR">
<thead><tr>
<th>정책</th>
<th>설명</th>
<th>관련 테스트</th>
</tr></thead><tbody>
<tr>
<td>DPR-01</td>
<td>승인 전 발송 불가</td>
<td>TC-005</td>
</tr>
<tr>
<td>DPR-02</td>
<td>반려된 공지는 발송 불가</td>
<td>TC-004</td>
</tr>
<tr>
<td>DPR-03</td>
<td>종료된 공지는 수정 불가</td>
<td>TC-008</td>
</tr>
<tr>
<td>DPR-04</td>
<td>예약시각은 현재 이후만 가능</td>
<td>TC-004</td>
</tr>
<tr>
<td>DPR-05</td>
<td>동일 시각 공지는 묶음 발송</td>
<td>TC-003</td>
</tr>
<tr>
<td>DPR-06</td>
<td>발송 완료 후 변경 불가</td>
<td>TC-009</td>
</tr>
<tr>
<td>DPR-07</td>
<td>캘린더 링크 누락 시 완료 불가</td>
<td>TC-007</td>
</tr>
<tr>
<td>DPR-08</td>
<td>승인 이력은 append-only</td>
<td>TC-010</td>
</tr>
</tbody></table>
    </section>

    <section id="arch">
      <h2>아키텍처 / 구성</h2>
      <div class="grid2">
        <div>
          <h3>기술 스택</h3>
          <table id="tblTech">
<thead><tr>
<th>구분</th>
<th>기술</th>
<th>포트</th>
</tr></thead><tbody>
<tr>
<td>Frontend</td>
<td>React.js</td>
<td>3000</td>
</tr>
<tr>
<td>Backend</td>
<td>Spring Boot (App-API)</td>
<td>8001</td>
</tr>
<tr>
<td>Gateway</td>
<td>Spring Cloud Gateway</td>
<td>11000</td>
</tr>
<tr>
<td>Database</td>
<td>MySQL</td>
<td>3306</td>
</tr>
<tr>
<td>External</td>
<td>Outlook API (Microsoft Graph)</td>
<td>-</td>
</tr>
<tr>
<td>External</td>
<td>SMTP Server</td>
<td>-</td>
</tr>
<tr>
<td>External</td>
<td>ASKME API</td>
<td>-</td>
</tr>
</tbody></table>
        </div>
        <div>
          <h3>마이크로서비스</h3>
          <table id="tblServices">
<thead><tr>
<th>서비스</th>
<th>포트</th>
<th>역할</th>
</tr></thead><tbody>
<tr>
<td>App-API</td>
<td>8001</td>
<td>공지 등록/승인/발송 API</td>
</tr>
<tr>
<td>Spring-Core</td>
<td>-</td>
<td>공통 유틸리티 (ErrorResponse 등)</td>
</tr>
<tr>
<td>Data-Temp</td>
<td>-</td>
<td>공지 시스템 데이터 계층</td>
</tr>
<tr>
<td>Data-Core</td>
<td>-</td>
<td>공통 JPA 설정 (엔티티/감사/트랜잭션)</td>
</tr>
<tr>
<td>Cloud Gateway</td>
<td>11000</td>
<td>API 라우팅, 인증 검증, 공통 헤더/에러 처리</td>
</tr>
<tr>
<td>Cloud Discovery</td>
<td>-</td>
<td>서비스 레지스트리</td>
</tr>
<tr>
<td>Cloud Actuator</td>
<td>-</td>
<td>헬스 체크, 모니터링</td>
</tr>
</tbody></table>
        </div>
      </div>
      <h3 style="margin-top:14px;">주요 API</h3>
      <table id="tblAPI">
<thead><tr>
<th>METHOD</th>
<th>PATH</th>
<th>설명</th>
</tr></thead><tbody>
<tr>
<td>GET</td>
<td>/api/notices/form</td>
<td>공지 등록 폼 옵션 로드 (notice-types, departments, services, users)</td>
</tr>
<tr>
<td>POST</td>
<td>/api/notices</td>
<td>공지 등록</td>
</tr>
<tr>
<td>GET</td>
<td>/api/notices</td>
<td>공지 조회</td>
</tr>
<tr>
<td>GET</td>
<td>/api/approvals/pending</td>
<td>승인 대기 목록 조회</td>
</tr>
<tr>
<td>PUT</td>
<td>/api/approvals/{id}/approve</td>
<td>승인</td>
</tr>
<tr>
<td>PUT</td>
<td>/api/approvals/{id}/reject</td>
<td>반려</td>
</tr>
<tr>
<td>PUT</td>
<td>/api/approvals/{id}/request-info</td>
<td>추가 정보 요청</td>
</tr>
<tr>
<td>POST</td>
<td>/api/schedules</td>
<td>발송 일정 등록</td>
</tr>
<tr>
<td>GET</td>
<td>/api/results</td>
<td>발송 결과 조회</td>
</tr>
</tbody></table>
    </section>

    <section id="flows">
      <h2>주요 프로세스(요약)</h2>
      <p>엑셀에는 요약만 넣었고, 여기서는 접이식으로 한 눈에 볼 수 있게 배치했습니다.</p>
      
<details class="card" open>
  <summary>1. 전체 시스템 아키텍처(요약)</summary>
  <pre>Frontend(React) → API Gateway/Load Balancer → Spring Cloud Gateway(11000)
→ App-API(8001) → Spring-Core/Data-Core/Data-Temp → MySQL → External(Outlook API, SMTP, ASKME API)</pre>
</details>


<details class="card" open>
  <summary>2. 공지 등록 흐름(요약)</summary>
  <pre>GET /notices/form 로 폼 옵션 로드 → 입력 검증(Frontend) → POST /notices
→ Gateway 인증/권한 검증 → NoticeService.createNotice → 트랜잭션 저장(notice, notice_rcpt, notification)
→ 200 OK (id, status=DRAFT)</pre>
</details>


<details class="card" open>
  <summary>3. 승인 프로세스(요약)</summary>
  <pre>작성자 승인요청(DRAFT→PENDING) → 승인자 알림/메일 발송 → 승인자 검토(승인/반려/정보요청)
→ ApprovalService 이력 append-only 기록 + notice 상태 업데이트 → 이벤트 핸들러로 결과 알림</pre>
</details>


<details class="card" open>
  <summary>4. 예약 발송 &amp; 메일 발송(요약)</summary>
  <pre>작성자 발송 시각 설정(status=APPROVED) → SEND_SCHEDULE 생성(SCHEDULED)
→ 스케줄러가 주기적으로 확인 → 동일 시각 묶음 발송(DPR-05) → SMTP 발송
→ SEND_RESULT 기록(수신자별) → schedule/notice 상태 업데이트(SENT/SENT_PARTIAL/FAILED)</pre>
</details>


<details class="card" open>
  <summary>5. Outlook 캘린더 연동(요약)</summary>
  <pre>메일 발송 성공 후 calendar_enabled/notice_type 확인 → Graph API로 이벤트 생성
→ 성공: calendar_link 저장, COMPLETED
→ 실패: CALENDAR_FAILED, error_message 저장, 관리자 알림</pre>
</details>


<details class="card" open>
  <summary>6. 에러 처리(요약)</summary>
  <pre>GlobalExceptionHandler(@RestControllerAdvice)에서 예외 분류/로깅
→ ErrorResponse(timestamp,status,path,errorId,trace) 생성 → JSON 응답 + 헤더 X-Error-ID</pre>
</details>

      <details class="card">
        <summary>에러 응답 예시 (ErrorResponse)</summary>
        <pre>{
  &quot;timestamp&quot;: &quot;2026-02-05 10:30:45&quot;,
  &quot;status&quot;: 400,
  &quot;error&quot;: &quot;Bad Request&quot;,
  &quot;message&quot;: &quot;유효하지 않은 요청입니다&quot;,
  &quot;path&quot;: &quot;/api/notices&quot;,
  &quot;errorId&quot;: &quot;f7a2c5d3-8f1d-4c5b-a9e2-1b3d5f7c9e1a&quot;,
  &quot;trace&quot;: null
}</pre>
      </details>
    </section>

    <section id="tcs">
      <h2>테스트 케이스(17)</h2>
      <p>아래 검색/필터로 TC를 빠르게 찾을 수 있습니다 (예: <code>DPR-04</code>, <code>Security</code>, <code>캘린더</code>).</p>
      <div class="toolbar">
        <input id="tcSearch" class="input" placeholder="검색: TC 번호/구분/키워드(승인, 캘린더, SMTP 등)"/>
        <span class="pill" data-filter="Happy Path">Happy Path</span>
        <span class="pill" data-filter="Exception">Exception</span>
        <span class="pill" data-filter="Integration">Integration</span>
        <span class="pill" data-filter="Performance">Performance</span>
        <span class="pill" data-filter="Security">Security</span>
        <span class="pill" data-filter="">전체</span>
      </div>
      <div style="max-height: 520px; overflow:auto; border-radius: 12px; border:1px solid var(--border);">
        <table id="tblTC">
<thead><tr>
<th>TC#</th>
<th>구분</th>
<th>시나리오</th>
<th>전제 조건</th>
<th>주요 단계</th>
<th>예상 결과</th>
</tr></thead><tbody>
<tr>
<td>TC-001</td>
<td>Happy Path</td>
<td>공지 등록→승인→예약→발송→캘린더</td>
<td>작성자/승인자 계정, 현재 2026-02-05 09:00 기준</td>
<td>공지 등록(DRAFT) → 승인요청(PENDING) → 승인(APPROVED) → 발송일정 등록 → 스케줄러 발송(SENT) → 캘린더 생성(CALENDAR_CREATED/COMPLETED)</td>
<td>최종 COMPLETED, SEND_RESULT 기록, calendar_link 저장</td>
</tr>
<tr>
<td>TC-002</td>
<td>Happy Path</td>
<td>반려 후 재승인</td>
<td>TC-001 승인 단계에서 반려 발생</td>
<td>반려(REJECTED, 사유) → 작성자 수정 → 재승인 요청(PENDING) → 승인(APPROVED)</td>
<td>append-only 이력 유지, 최종 APPROVED</td>
</tr>
<tr>
<td>TC-003</td>
<td>Happy Path</td>
<td>묶음 발송(DPR-05)</td>
<td>승인된 공지 3개, 동일 발송 시각</td>
<td>스케줄러가 동일 시각 공지 그룹화 → 그룹별 메일 생성/발송</td>
<td>3개 동시 발송, 효율화, 각각 결과 기록</td>
</tr>
<tr>
<td>TC-004</td>
<td>Exception</td>
<td>과거 시각 예약(DPR-04)</td>
<td>공지 승인됨, 현재 2026-02-05 09:00</td>
<td>발송시각을 과거로 설정 후 저장</td>
<td>HTTP 400, &#x27;예약 시각은 현재 이후여야 합니다&#x27;, 저장 실패</td>
</tr>
<tr>
<td>TC-005</td>
<td>Exception</td>
<td>승인 전 발송 시도(DPR-01)</td>
<td>공지 상태 PENDING</td>
<td>발송 버튼/일정 등록 시도</td>
<td>HTTP 403 또는 정책 에러, 발송 진행 안 함</td>
</tr>
<tr>
<td>TC-006</td>
<td>Exception</td>
<td>메일 발송 실패(SMTP)</td>
<td>공지 승인됨, 예약 시각 도래, SMTP 실패 유도</td>
<td>스케줄러 실행 → SMTP 연결 실패</td>
<td>SEND_RESULT FAILED 기록, 재시도 로직, 캘린더 연동 스킵</td>
</tr>
<tr>
<td>TC-007</td>
<td>Exception</td>
<td>캘린더 연동 실패(DPR-07)</td>
<td>메일 발송 성공, Outlook API 실패 유도</td>
<td>CalendarService 호출 → 4xx/5xx 처리</td>
<td>CALENDAR_FAILED 기록, error_message 저장, 수동 확인 필요</td>
</tr>
<tr>
<td>TC-008</td>
<td>Exception</td>
<td>종료 공지 수정 시도(DPR-03)</td>
<td>공지 상태 COMPLETED</td>
<td>공지 내용 수정 시도</td>
<td>HTTP 400, 수정 불가</td>
</tr>
<tr>
<td>TC-009</td>
<td>Exception</td>
<td>발송 완료 후 변경(DPR-06)</td>
<td>공지 발송 완료(SENT/COMPLETED)</td>
<td>발송 일정 변경/재발송 시도</td>
<td>HTTP 400, 변경 불가(재발송은 새 공지로)</td>
</tr>
<tr>
<td>TC-010</td>
<td>Exception</td>
<td>승인 이력 변경 시도(DPR-08)</td>
<td>승인 이력 존재</td>
<td>DB에서 직접 이력 수정 시도</td>
<td>DB 제약 조건 위반, 이력 불변성 보장</td>
</tr>
<tr>
<td>TC-011</td>
<td>Integration</td>
<td>다양한 수신 대상 조합</td>
<td>공지 1개</td>
<td>법인/부서/사용자/서비스 혼합 선택 후 발송</td>
<td>중복 제거 후 정확한 수신자 수, SEND_RESULT 레코드 생성</td>
</tr>
<tr>
<td>TC-012</td>
<td>Integration</td>
<td>에러 응답 포맷 일관성</td>
<td>각종 에러 시나리오 준비</td>
<td>에러 발생 시 ErrorResponse 확인 (errorId 포함)</td>
<td>status/message/path/errorId 일관, 추적 가능</td>
</tr>
<tr>
<td>TC-013</td>
<td>Performance</td>
<td>대량 공지 발송</td>
<td>공지 1000개, 수신자 각 100명, 동일 발송 시각</td>
<td>스케줄러 동시 처리 및 묶음 발송</td>
<td>DB/메일서버 부하 관찰, 목표 응답/처리 시간 만족</td>
</tr>
<tr>
<td>TC-014</td>
<td>Performance/Concurrency</td>
<td>동시 승인 요청</td>
<td>여러 공지 동시 승인 요청</td>
<td>동시에 등록/승인 수행</td>
<td>Lock/Transaction으로 무결성 유지, 중복 처리 없음</td>
</tr>
<tr>
<td>TC-015</td>
<td>Security</td>
<td>권한 검증</td>
<td>승인 권한 없는 일반 사용자</td>
<td>승인/타인 공지 수정 시도</td>
<td>HTTP 403, 권한 없음</td>
</tr>
<tr>
<td>TC-016</td>
<td>Security</td>
<td>SQL Injection 방지</td>
<td>공지 검색 입력 필드</td>
<td>입력: `&#x27;; DROP TABLE NOTICE; --`</td>
<td>PreparedStatement/파라미터 바인딩으로 방지</td>
</tr>
<tr>
<td>TC-017</td>
<td>Security</td>
<td>XSS 방지</td>
<td>공지 제목/내용 입력 필드</td>
<td>입력: `&lt;script&gt;alert(&#x27;XSS&#x27;)&lt;/script&gt;`</td>
<td>HTML 이스케이프 처리, 스크립트 실행 안 됨</td>
</tr>
</tbody></table>
      </div>
      <p style="margin-top:10px;">팁: 표의 컬럼이 많아서 화면이 좁으면 가로 스크롤을 써주세요.</p>
    </section>

    <section id="seed">
      <h2>Seed 데이터 / 요청 예시</h2>
      <div class="grid2">
        <details class="card" open>
          <summary>Seed SQL</summary>
          <pre>-- 공지 유형
INSERT INTO NOTICE_TYPE (id, name, description) VALUES
  (&#x27;NTY-01&#x27;, &#x27;서비스공지&#x27;, &#x27;일반 서비스 관련 공지&#x27;),
  (&#x27;NTY-02&#x27;, &#x27;공식공지&#x27;, &#x27;회사 공식 공지 (캘린더 등록)&#x27;),
  (&#x27;NTY-03&#x27;, &#x27;중요공지&#x27;, &#x27;긴급/중요 공지 (캘린더 등록)&#x27;);

-- 부서
INSERT INTO DEPARTMENT (id, name, parent_id) VALUES
  (&#x27;DEPT-001&#x27;, &#x27;IT팀&#x27;, NULL),
  (&#x27;DEPT-002&#x27;, &#x27;운영팀&#x27;, NULL),
  (&#x27;DEPT-003&#x27;, &#x27;개발팀&#x27;, &#x27;DEPT-001&#x27;);

-- 사용자
INSERT INTO USER (id, name, email, department_id) VALUES
  (&#x27;USER-001&#x27;, &#x27;김철수&#x27;, &#x27;kim@corp.com&#x27;, &#x27;DEPT-001&#x27;),
  (&#x27;USER-002&#x27;, &#x27;이영희&#x27;, &#x27;lee@corp.com&#x27;, &#x27;DEPT-002&#x27;),
  (&#x27;USER-003&#x27;, &#x27;박관리&#x27;, &#x27;park@corp.com&#x27;, &#x27;DEPT-001&#x27;);
</pre>
        </details>
        <details class="card" open>
          <summary>Sample Request (JSON)</summary>
          <pre>{
  &quot;notice_type_id&quot;: &quot;NTY-01&quot;,
  &quot;title&quot;: &quot;[공지] 새로운 시스템 출시&quot;,
  &quot;content&quot;: &quot;2026년 2월 20일 신규 시스템이 출시됩니다...&quot;,
  &quot;sender_dept_id&quot;: &quot;DEPT-001&quot;,
  &quot;recipients&quot;: [
    {
      &quot;type&quot;: &quot;corporate&quot;,
      &quot;recipient_id&quot;: &quot;CORP-001&quot;
    },
    {
      &quot;type&quot;: &quot;user&quot;,
      &quot;recipient_id&quot;: &quot;USER-002&quot;
    }
  ],
  &quot;hash_tags&quot;: [
    &quot;#신규시스템&quot;,
    &quot;#공지&quot;
  ],
  &quot;send_schedule&quot;: {
    &quot;scheduled_time&quot;: &quot;2026-02-20T10:00:00&quot;,
    &quot;calendar_enabled&quot;: true
  }
}</pre>
        </details>
      </div>
    </section>

    <section id="ts">
      <h2>트러블슈팅</h2>
      <p>실패 유형별로 먼저 볼 체크 포인트를 한 번에 모았습니다.</p>
      <table id="tblTS">
<thead><tr>
<th>증상</th>
<th>확인 사항(체크리스트)</th>
</tr></thead><tbody>
<tr>
<td>메일 발송 실패</td>
<td>- SMTP 설정 확인 (host/port/auth/TLS/timeout)<br/>- 네트워크/방화벽 확인<br/>- 수신자 이메일 형식/존재 여부<br/>- 인증(App-specific password 또는 OAuth2) 확인</td>
</tr>
<tr>
<td>캘린더 연동 실패</td>
<td>- OAuth2 토큰 유효기간/갱신 로직<br/>- Outlook API 권한(Scope) 및 요청 URL<br/>- 사용자 메일박스/캘린더 권한/연동 상태</td>
</tr>
<tr>
<td>승인 알림 미수신</td>
<td>- NotificationService 로그/DB 저장 확인<br/>- 메일 전송 큐 및 서버 로그<br/>- 수신자 이메일/스팸 필터/권한 확인</td>
</tr>
</tbody></table>
      <p style="margin-top:10px;">로그에서 <code>errorId</code>로 추적하는 방식이 핵심입니다.</p>
    </section>
  </main>
</div>

<footer>
  <div>파일: notice_system_test_guide.html · notice_system_test_guide.xlsx</div>
</footer>

<script>
(function() {
  const search = document.getElementById('tcSearch');
  const pills = Array.from(document.querySelectorAll('.pill'));
  const table = document.getElementById('tblTC');
  const tbody = table.querySelector('tbody');
  const rows = Array.from(tbody.querySelectorAll('tr'));
  let activeFilter = "";

  function apply() {
    const q = (search.value || "").toLowerCase().trim();
    rows.forEach(r => {
      const txt = r.innerText.toLowerCase();
      const matchesText = !q || txt.includes(q);
      const matchesFilter = !activeFilter || txt.includes(activeFilter.toLowerCase());
      r.style.display = (matchesText && matchesFilter) ? "" : "none";
    });
  }

  pills.forEach(p => {
    p.addEventListener('click', () => {
      pills.forEach(x => x.classList.remove('active'));
      p.classList.add('active');
      activeFilter = p.getAttribute('data-filter') || "";
      apply();
    });
  });

  search.addEventListener('input', apply);

  // default: 전체
  const all = pills.find(p => (p.getAttribute('data-filter')||"") === "");
  if (all) all.classList.add('active');
})();
</script>

</body>
</html>
