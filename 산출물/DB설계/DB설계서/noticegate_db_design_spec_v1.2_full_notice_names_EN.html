<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>공지관리 시스템 DB 설계서 (v1.2)</title>
<style>
  body { font-family: -apple-system,BlinkMacSystemFont,'Segoe UI','Malgun Gothic',sans-serif; background:#f6f7fb; color:#111; margin:0; }
  .container { max-width: 1100px; margin: 24px auto; padding: 0 16px 48px; }
  .card { background:#fff; border:1px solid #e6e8f0; border-radius:14px; padding:20px 22px; box-shadow:0 6px 18px rgba(16,24,40,.06); margin:14px 0; }
  h1 { margin: 6px 0 4px; font-size: 24px; }
  h2 { margin: 0 0 10px; font-size: 18px; }
  h3 { margin: 18px 0 8px; font-size: 15px; }
  .muted { color:#6b7280; font-size: 12px; }
  table { width:100%; border-collapse: collapse; font-size: 13px; }
  th, td { border:1px solid #e6e8f0; padding:10px; vertical-align: top; }
  th { background:#f3f5ff; font-weight:700; }
  code, pre { font-family: ui-monospace,SFMono-Regular,Menlo,Consolas,monospace; }
  pre { background:#0b1020; color:#e8eaf2; padding:14px; border-radius:12px; overflow:auto; }
  .pill { display:inline-block; padding:3px 10px; border-radius:999px; background:#eef2ff; border:1px solid #dbe2ff; font-size:12px; }
  ul { margin: 8px 0 0 18px; }
</style>
</head>
<body>
<div class="container">
  <div class="card">
    <div class="muted">공지관리 시스템 (NoticeGate)</div>
    <h1>DB 설계서 <span class="pill">v1.2</span></h1>
    <div class="muted">작성자: 함윤식 · 작성일: 2026-01-02</div>
    <div class="muted">변경사항: 테이블명만 영문(도메인 기반)으로 변경하고, 내용/양식은 그대로 유지</div>
  </div>

  <div class="card">
    <h2>문서 이력 (Version History)</h2>
    <table>
      <tr><th style="width:110px;">버전</th><th style="width:140px;">일자</th><th style="width:120px;">작성자</th><th>변경 내용</th></tr>
      <tr><td>v1.0</td><td>2026-01-02</td><td>함윤식</td><td>초안 작성(TB_* 네이밍)</td></tr>
      <tr><td>v1.1</td><td>2026-01-02</td><td>함윤식</td><td>테이블명 업무 구분(한글) 적용(공지_*)</td></tr>
      <tr><td>v1.2</td><td>2026-01-02</td><td>함윤식</td><td>테이블명 영문(도메인 기반)으로 변경: NOTICE_*</td></tr>
    </table>
  </div>

  <div class="card">
    <h2>개요</h2>
    <table>
      <tr><th style="width:160px;">목적</th><td>공지(등록/승인/발송/연계) 데이터 구조를 정의하여 개발·테스트·운영 인수인계에 활용한다.</td></tr>
      <tr><th>범위</th><td>공지 기본, 승인, 발송계획, 발송이력, 캘린더 이벤트, 수신대상, 해시태그, 첨부파일</td></tr>
      <tr><th>비고</th><td>Outlook/Graph API 상세 연계 스펙은 별도 연계 설계서에서 정의(본 문서에서는 데이터 모델 중심).</td></tr>
    </table>
  </div>

  <div class="card">
    <h2>설계 원칙</h2>
    <ul>
      <li>테이블명은 도메인 prefix 기반 <b>NOTICE_*</b> 사용</li>
      <li>PK는 <b>..._ID</b> 형태, 시간은 <b>..._AT</b>, Boolean은 <b>IS_</b></li>
      <li>NOTICE_BASE 를 부모로 하위 테이블이 참조하며, 관계는 기본적으로 <b>ON DELETE CASCADE</b></li>
      <li>NOTICE_APPROVAL, NOTICE_SEND_PLAN 은 공지 1건당 0~1건(UNIQUE NOTICE_ID)</li>
    </ul>
  </div>

  <div class="card">
    <h2>전체 ERD (Mermaid)</h2>
    <div class="muted">VSCode Mermaid Preview에서 렌더링하여 확인</div>
    <pre><code>```mermaid
erDiagram
    NOTICE_BASE ||--o| NOTICE_APPROVAL : 승인
    NOTICE_BASE ||--o| NOTICE_SEND_PLAN : 발송계획
    NOTICE_BASE ||--o{ NOTICE_DELIVERY_LOG : 발송이력
    NOTICE_BASE ||--o{ NOTICE_CALENDAR_EVENT : 캘린더이벤트
    NOTICE_BASE ||--o{ NOTICE_TARGET : 수신대상
    NOTICE_BASE ||--o{ NOTICE_TAG : 해시태그
    NOTICE_BASE ||--o{ NOTICE_ATTACHMENT : 첨부파일

    NOTICE_BASE {
        BIGSERIAL NOTICE_ID PK "공지 ID"
        VARCHAR TITLE "공지 제목"
        TEXT CONTENT "공지 내용"
        VARCHAR NOTICE_LEVEL "공지 중요도"
        VARCHAR NOTICE_STATUS "공지 상태"
        VARCHAR SENDER_ORG_UNIT_ID "발신 부서 ID"
        VARCHAR SENDER_ORG_UNIT_NAME "발신 부서명"
        TIMESTAMP PUBLISH_START_AT "게시 시작 일시"
        TIMESTAMP PUBLISH_END_AT "게시 종료 일시"
        BOOLEAN IS_MAINTENANCE "점검/장애 공지 여부"
        BOOLEAN IS_COMPLETED "완료 처리 여부"
        TIMESTAMP COMPLETED_AT "완료 처리 일시"
        VARCHAR MAIL_SUBJECT "메일/캘린더 제목"
        TIMESTAMP CREATED_AT "등록 일시"
        VARCHAR CREATED_BY "등록자"
        TIMESTAMP UPDATED_AT "수정 일시"
        VARCHAR UPDATED_BY "수정자"
    }

    NOTICE_APPROVAL {
        BIGSERIAL APPROVAL_ID PK "승인 ID"
        BIGINT NOTICE_ID FK "공지 ID"
        VARCHAR APPROVAL_STATUS "승인 상태"
        VARCHAR APPROVER_USER_ID "승인자 ID"
        VARCHAR APPROVER_NAME "승인자 이름"
        TIMESTAMP REQUESTED_AT "승인 요청 일시"
        TIMESTAMP DECIDED_AT "승인/반려 처리 일시"
        VARCHAR REJECT_REASON "반려 사유"
    }

    NOTICE_SEND_PLAN {
        BIGSERIAL SEND_PLAN_ID PK "발송 계획 ID"
        BIGINT NOTICE_ID FK "공지 ID"
        VARCHAR SEND_MODE "발송 방식"
        TIMESTAMP SCHEDULED_SEND_AT "예약 발송 일시"
        VARCHAR BUNDLE_KEY "묶음 발송 기준 키"
        BOOLEAN ALLOW_BUNDLE "묶음 발송 허용 여부"
    }

    NOTICE_DELIVERY_LOG {
        BIGSERIAL DELIVERY_ID PK "발송 이력 ID"
        BIGINT NOTICE_ID FK "공지 ID"
        VARCHAR CHANNEL "발송 채널"
        VARCHAR DELIVERY_STATUS "발송 상태"
        TIMESTAMP SENT_AT "발송 완료 일시"
        INT ATTEMPT_COUNT "발송 시도 횟수"
        TEXT LAST_ERROR "최종 오류"
        VARCHAR PROVIDER_MESSAGE_ID "외부 메시지 ID"
        VARCHAR IDEMPOTENCY_KEY "중복 방지 키"
    }

    NOTICE_CALENDAR_EVENT {
        BIGSERIAL CALENDAR_EVENT_ID PK "캘린더 이벤트 ID"
        BIGINT NOTICE_ID FK "공지 ID"
        VARCHAR RESOURCE_MAILBOX "공지 자원 메일"
        VARCHAR PROVIDER_EVENT_ID "외부 이벤트 ID"
        TIMESTAMP CREATED_AT "캘린더 등록 일시"
    }

    NOTICE_TARGET {
        BIGSERIAL TARGET_ID PK "수신 대상 ID"
        BIGINT NOTICE_ID FK "공지 ID"
        VARCHAR TARGET_TYPE "대상 유형"
        VARCHAR TARGET_KEY "대상 식별 키"
        VARCHAR TARGET_NAME "대상 명칭"
    }

    NOTICE_TAG {
        BIGSERIAL TAG_ID PK "태그 ID"
        BIGINT NOTICE_ID FK "공지 ID"
        VARCHAR TAG_VALUE "해시태그"
    }

    NOTICE_ATTACHMENT {
        BIGSERIAL ATTACHMENT_ID PK "첨부 파일 ID"
        BIGINT NOTICE_ID FK "공지 ID"
        VARCHAR FILE_NAME "파일명"
        BIGINT SIZE_BYTES "파일 크기(Byte)"
        VARCHAR STORAGE_KEY "파일 저장 키"
    }
```</code></pre>
  </div>
  <div class="card">
    <h2>테이블 목록</h2>
    <table>
      <tr><th style="width:60px;">No</th><th style="width:260px;">테이블명</th><th style="width:180px;">한글명</th><th>설명</th></tr>
      <tr><td>1</td><td>NOTICE_BASE</td><td>공지 기본</td><td>공지 기본 정보</td></tr>
      <tr><td>2</td><td>NOTICE_APPROVAL</td><td>공지 승인</td><td>공지 승인 정보</td></tr>
      <tr><td>3</td><td>NOTICE_SEND_PLAN</td><td>공지 발송 계획</td><td>공지 발송 계획</td></tr>
      <tr><td>4</td><td>NOTICE_DELIVERY_LOG</td><td>공지 발송 이력</td><td>공지 발송 이력</td></tr>
      <tr><td>5</td><td>NOTICE_CALENDAR_EVENT</td><td>공지 캘린더 이벤트</td><td>공지 캘린더 일정 연계</td></tr>
      <tr><td>6</td><td>NOTICE_TARGET</td><td>공지 수신 대상</td><td>공지 수신 대상</td></tr>
      <tr><td>7</td><td>NOTICE_TAG</td><td>공지 해시태그</td><td>공지 해시태그</td></tr>
      <tr><td>8</td><td>NOTICE_ATTACHMENT</td><td>공지 첨부 파일</td><td>공지 첨부 파일</td></tr>
    </table>
  </div>
  <div class="card">
    <h2>NOTICE_BASE (공지 기본)</h2>
    <div class="muted">공지 기본 정보</div>
    <h3>핵심 규칙/메모</h3>
    <ul>
      <li>모든 공지는 승인(APPROVED) 이후에만 발송 가능</li>
      <li>완료 처리된 공지는 수정 불가(정책)</li>
      <li>L3(긴급) 공지는 게시 기간(시작/종료) 지정 권장 또는 필수(정책)</li>
    </ul>
    <h3>컬럼 요약</h3>
    <table>
      <tr>
        <th style="width:50px;">No</th>
        <th style="width:220px;">컬럼명</th>
        <th style="width:180px;">한글명</th>
        <th style="width:140px;">타입</th>
        <th style="width:80px;">NULL</th>
        <th style="width:70px;">PK</th>
        <th style="width:240px;">FK</th>
        <th style="width:120px;">기본값</th>
        <th>설명</th>
      </tr>
      <tr><td>1</td><td>NOTICE_ID</td><td>공지 ID</td><td>BIGSERIAL</td><td>N</td><td>Y</td><td></td><td>자동</td><td>공지 식별자(PK)</td></tr>
      <tr><td>2</td><td>TITLE</td><td>공지 제목</td><td>VARCHAR(200)</td><td>N</td><td></td><td></td><td></td><td>공지 제목</td></tr>
      <tr><td>3</td><td>CONTENT</td><td>공지 내용</td><td>TEXT</td><td>N</td><td></td><td></td><td></td><td>공지 본문 내용</td></tr>
      <tr><td>4</td><td>NOTICE_LEVEL</td><td>공지 중요도</td><td>VARCHAR(10)</td><td>N</td><td></td><td></td><td></td><td>L1:일반, L2:중요, L3:긴급</td></tr>
      <tr><td>5</td><td>NOTICE_STATUS</td><td>공지 상태</td><td>VARCHAR(30)</td><td>N</td><td></td><td></td><td></td><td>DRAFT/PENDING/APPROVED/SENT/FAILED/COMPLETED 등</td></tr>
      <tr><td>6</td><td>SENDER_ORG_UNIT_ID</td><td>발신 부서 ID</td><td>VARCHAR(50)</td><td>Y</td><td></td><td></td><td></td><td>로그인 사용자 부서 ID</td></tr>
      <tr><td>7</td><td>SENDER_ORG_UNIT_NAME</td><td>발신 부서명</td><td>VARCHAR(100)</td><td>Y</td><td></td><td></td><td></td><td>로그인 사용자 부서명</td></tr>
      <tr><td>8</td><td>PUBLISH_START_AT</td><td>게시 시작 일시</td><td>TIMESTAMP</td><td>Y</td><td></td><td></td><td></td><td>게시 시작(캘린더/화면 표시 기준)</td></tr>
      <tr><td>9</td><td>PUBLISH_END_AT</td><td>게시 종료 일시</td><td>TIMESTAMP</td><td>Y</td><td></td><td></td><td></td><td>게시 종료(특히 L3에서 필수 정책 가능)</td></tr>
      <tr><td>10</td><td>IS_MAINTENANCE</td><td>점검/장애 공지 여부</td><td>BOOLEAN</td><td>N</td><td></td><td></td><td>FALSE</td><td>점검/장애 유형 공지 여부</td></tr>
      <tr><td>11</td><td>IS_COMPLETED</td><td>완료 처리 여부</td><td>BOOLEAN</td><td>N</td><td></td><td></td><td>FALSE</td><td>완료 공지로 전환 여부</td></tr>
      <tr><td>12</td><td>COMPLETED_AT</td><td>완료 처리 일시</td><td>TIMESTAMP</td><td>Y</td><td></td><td></td><td></td><td>완료 처리 시각</td></tr>
      <tr><td>13</td><td>MAIL_SUBJECT</td><td>메일/캘린더 제목</td><td>VARCHAR(300)</td><td>Y</td><td></td><td></td><td></td><td>메일 제목 및 캘린더 일정 제목 기준</td></tr>
      <tr><td>14</td><td>CREATED_AT</td><td>등록 일시</td><td>TIMESTAMP</td><td>N</td><td></td><td></td><td>NOW()</td><td>생성 시각</td></tr>
      <tr><td>15</td><td>CREATED_BY</td><td>등록자</td><td>VARCHAR(50)</td><td>N</td><td></td><td></td><td></td><td>생성자 사용자 ID</td></tr>
      <tr><td>16</td><td>UPDATED_AT</td><td>수정 일시</td><td>TIMESTAMP</td><td>N</td><td></td><td></td><td>NOW()</td><td>수정 시각</td></tr>
      <tr><td>17</td><td>UPDATED_BY</td><td>수정자</td><td>VARCHAR(50)</td><td>N</td><td></td><td></td><td></td><td>수정자 사용자 ID</td></tr>
    </table>
  </div>
  <div class="card">
    <h2>NOTICE_APPROVAL (공지 승인)</h2>
    <div class="muted">공지 승인 정보</div>
    <h3>핵심 규칙/메모</h3>
    <ul>
      <li>공지 1건당 승인 정보는 최대 1건(UNIQUE NOTICE_ID)</li>
      <li>승인 상태가 APPROVED가 되기 전에는 발송 불가</li>
    </ul>
    <h3>컬럼 요약</h3>
    <table>
      <tr>
        <th style="width:50px;">No</th>
        <th style="width:220px;">컬럼명</th>
        <th style="width:180px;">한글명</th>
        <th style="width:140px;">타입</th>
        <th style="width:80px;">NULL</th>
        <th style="width:70px;">PK</th>
        <th style="width:240px;">FK</th>
        <th style="width:120px;">기본값</th>
        <th>설명</th>
      </tr>
      <tr><td>1</td><td>APPROVAL_ID</td><td>승인 ID</td><td>BIGSERIAL</td><td>N</td><td>Y</td><td></td><td>자동</td><td>승인 식별자(PK)</td></tr>
      <tr><td>2</td><td>NOTICE_ID</td><td>공지 ID</td><td>BIGINT</td><td>N</td><td></td><td>NOTICE_BASE.NOTICE_ID</td><td></td><td>공지 참조(FK), 공지 1건당 0~1건(UNIQUE)</td></tr>
      <tr><td>3</td><td>APPROVAL_STATUS</td><td>승인 상태</td><td>VARCHAR(20)</td><td>N</td><td></td><td></td><td></td><td>PENDING/APPROVED/REJECTED</td></tr>
      <tr><td>4</td><td>APPROVER_USER_ID</td><td>승인자 ID</td><td>VARCHAR(50)</td><td>Y</td><td></td><td></td><td></td><td>승인 처리 사용자 ID</td></tr>
      <tr><td>5</td><td>APPROVER_NAME</td><td>승인자 이름</td><td>VARCHAR(100)</td><td>Y</td><td></td><td></td><td></td><td>승인 처리자 표시명</td></tr>
      <tr><td>6</td><td>REQUESTED_AT</td><td>승인 요청 일시</td><td>TIMESTAMP</td><td>N</td><td></td><td></td><td>NOW()</td><td>승인 요청 시각</td></tr>
      <tr><td>7</td><td>DECIDED_AT</td><td>승인/반려 처리 일시</td><td>TIMESTAMP</td><td>Y</td><td></td><td></td><td></td><td>승인/반려 결정 시각</td></tr>
      <tr><td>8</td><td>REJECT_REASON</td><td>반려 사유</td><td>VARCHAR(500)</td><td>Y</td><td></td><td></td><td></td><td>반려 시 사유</td></tr>
    </table>
  </div>
  <div class="card">
    <h2>NOTICE_SEND_PLAN (공지 발송 계획)</h2>
    <div class="muted">공지 발송 계획</div>
    <h3>핵심 규칙/메모</h3>
    <ul>
      <li>SEND_MODE=SCHEDULED 인 경우 SCHEDULED_SEND_AT 값 필요(정책)</li>
      <li>같은 발송 시각/대상 기준으로 묶음 발송 가능(정책)</li>
    </ul>
    <h3>컬럼 요약</h3>
    <table>
      <tr>
        <th style="width:50px;">No</th>
        <th style="width:220px;">컬럼명</th>
        <th style="width:180px;">한글명</th>
        <th style="width:140px;">타입</th>
        <th style="width:80px;">NULL</th>
        <th style="width:70px;">PK</th>
        <th style="width:240px;">FK</th>
        <th style="width:120px;">기본값</th>
        <th>설명</th>
      </tr>
      <tr><td>1</td><td>SEND_PLAN_ID</td><td>발송 계획 ID</td><td>BIGSERIAL</td><td>N</td><td>Y</td><td></td><td>자동</td><td>발송 계획 식별자(PK)</td></tr>
      <tr><td>2</td><td>NOTICE_ID</td><td>공지 ID</td><td>BIGINT</td><td>N</td><td></td><td>NOTICE_BASE.NOTICE_ID</td><td></td><td>공지 참조(FK), 공지 1건당 0~1건(UNIQUE)</td></tr>
      <tr><td>3</td><td>SEND_MODE</td><td>발송 방식</td><td>VARCHAR(20)</td><td>N</td><td></td><td></td><td></td><td>IMMEDIATE(즉시)/SCHEDULED(예약)</td></tr>
      <tr><td>4</td><td>SCHEDULED_SEND_AT</td><td>예약 발송 일시</td><td>TIMESTAMP</td><td>Y</td><td></td><td></td><td></td><td>예약 발송 시각</td></tr>
      <tr><td>5</td><td>BUNDLE_KEY</td><td>묶음 발송 기준 키</td><td>VARCHAR(80)</td><td>Y</td><td></td><td></td><td></td><td>예: yyyyMMddHHmm + 법인/부서</td></tr>
      <tr><td>6</td><td>ALLOW_BUNDLE</td><td>묶음 발송 허용 여부</td><td>BOOLEAN</td><td>N</td><td></td><td></td><td>TRUE</td><td>묶음 발송 허용</td></tr>
    </table>
  </div>
  <div class="card">
    <h2>NOTICE_DELIVERY_LOG (공지 발송 이력)</h2>
    <div class="muted">공지 발송 이력</div>
    <h3>핵심 규칙/메모</h3>
    <ul>
      <li>발송 처리 단위(시도)마다 1건 기록</li>
      <li>FAILED 인 경우 LAST_ERROR 기록 권장</li>
    </ul>
    <h3>컬럼 요약</h3>
    <table>
      <tr>
        <th style="width:50px;">No</th>
        <th style="width:220px;">컬럼명</th>
        <th style="width:180px;">한글명</th>
        <th style="width:140px;">타입</th>
        <th style="width:80px;">NULL</th>
        <th style="width:70px;">PK</th>
        <th style="width:240px;">FK</th>
        <th style="width:120px;">기본값</th>
        <th>설명</th>
      </tr>
      <tr><td>1</td><td>DELIVERY_ID</td><td>발송 이력 ID</td><td>BIGSERIAL</td><td>N</td><td>Y</td><td></td><td>자동</td><td>발송 이력 식별자(PK)</td></tr>
      <tr><td>2</td><td>NOTICE_ID</td><td>공지 ID</td><td>BIGINT</td><td>N</td><td></td><td>NOTICE_BASE.NOTICE_ID</td><td></td><td>공지 참조(FK)</td></tr>
      <tr><td>3</td><td>CHANNEL</td><td>발송 채널</td><td>VARCHAR(30)</td><td>N</td><td></td><td></td><td>OUTLOOK_MAIL</td><td>발송 채널(기본 Outlook 메일)</td></tr>
      <tr><td>4</td><td>DELIVERY_STATUS</td><td>발송 상태</td><td>VARCHAR(20)</td><td>N</td><td></td><td></td><td></td><td>READY/SENT/FAILED</td></tr>
      <tr><td>5</td><td>SENT_AT</td><td>발송 완료 일시</td><td>TIMESTAMP</td><td>Y</td><td></td><td></td><td></td><td>발송 완료 시각</td></tr>
      <tr><td>6</td><td>ATTEMPT_COUNT</td><td>발송 시도 횟수</td><td>INT</td><td>N</td><td></td><td></td><td>0</td><td>재시도 횟수 누적</td></tr>
      <tr><td>7</td><td>LAST_ERROR</td><td>최종 오류</td><td>TEXT</td><td>Y</td><td></td><td></td><td></td><td>실패 시 오류 메시지</td></tr>
      <tr><td>8</td><td>PROVIDER_MESSAGE_ID</td><td>외부 메시지 ID</td><td>VARCHAR(120)</td><td>Y</td><td></td><td></td><td></td><td>Outlook/Graph 메시지 ID 등</td></tr>
      <tr><td>9</td><td>IDEMPOTENCY_KEY</td><td>중복 방지 키</td><td>VARCHAR(80)</td><td>Y</td><td></td><td></td><td></td><td>중복 발송 방지 키</td></tr>
    </table>
  </div>
  <div class="card">
    <h2>NOTICE_CALENDAR_EVENT (공지 캘린더 이벤트)</h2>
    <div class="muted">공지 캘린더 일정 연계</div>
    <h3>핵심 규칙/메모</h3>
    <ul>
      <li>공지 1건당 N건 가능(재등록/수정 이력 대비)</li>
    </ul>
    <h3>컬럼 요약</h3>
    <table>
      <tr>
        <th style="width:50px;">No</th>
        <th style="width:220px;">컬럼명</th>
        <th style="width:180px;">한글명</th>
        <th style="width:140px;">타입</th>
        <th style="width:80px;">NULL</th>
        <th style="width:70px;">PK</th>
        <th style="width:240px;">FK</th>
        <th style="width:120px;">기본값</th>
        <th>설명</th>
      </tr>
      <tr><td>1</td><td>CALENDAR_EVENT_ID</td><td>캘린더 이벤트 ID</td><td>BIGSERIAL</td><td>N</td><td>Y</td><td></td><td>자동</td><td>캘린더 이벤트 식별자(PK)</td></tr>
      <tr><td>2</td><td>NOTICE_ID</td><td>공지 ID</td><td>BIGINT</td><td>N</td><td></td><td>NOTICE_BASE.NOTICE_ID</td><td></td><td>공지 참조(FK)</td></tr>
      <tr><td>3</td><td>RESOURCE_MAILBOX</td><td>공지 자원 메일</td><td>VARCHAR(120)</td><td>N</td><td></td><td></td><td></td><td>공지 자원 메일 주소</td></tr>
      <tr><td>4</td><td>PROVIDER_EVENT_ID</td><td>외부 이벤트 ID</td><td>VARCHAR(120)</td><td>N</td><td></td><td></td><td></td><td>Outlook/Graph 이벤트 ID</td></tr>
      <tr><td>5</td><td>CREATED_AT</td><td>캘린더 등록 일시</td><td>TIMESTAMP</td><td>N</td><td></td><td></td><td>NOW()</td><td>등록 시각</td></tr>
    </table>
  </div>
  <div class="card">
    <h2>NOTICE_TARGET (공지 수신 대상)</h2>
    <div class="muted">공지 수신 대상</div>
    <h3>핵심 규칙/메모</h3>
    <ul>
      <li>모든 셀렉트는 복수 선택 가능(대상 테이블에 N건으로 저장)</li>
    </ul>
    <h3>컬럼 요약</h3>
    <table>
      <tr>
        <th style="width:50px;">No</th>
        <th style="width:220px;">컬럼명</th>
        <th style="width:180px;">한글명</th>
        <th style="width:140px;">타입</th>
        <th style="width:80px;">NULL</th>
        <th style="width:70px;">PK</th>
        <th style="width:240px;">FK</th>
        <th style="width:120px;">기본값</th>
        <th>설명</th>
      </tr>
      <tr><td>1</td><td>TARGET_ID</td><td>수신 대상 ID</td><td>BIGSERIAL</td><td>N</td><td>Y</td><td></td><td>자동</td><td>수신 대상 식별자(PK)</td></tr>
      <tr><td>2</td><td>NOTICE_ID</td><td>공지 ID</td><td>BIGINT</td><td>N</td><td></td><td>NOTICE_BASE.NOTICE_ID</td><td></td><td>공지 참조(FK)</td></tr>
      <tr><td>3</td><td>TARGET_TYPE</td><td>대상 유형</td><td>VARCHAR(20)</td><td>N</td><td></td><td></td><td></td><td>CORP/ORG_UNIT/USER/SERVICE</td></tr>
      <tr><td>4</td><td>TARGET_KEY</td><td>대상 식별 키</td><td>VARCHAR(80)</td><td>N</td><td></td><td></td><td></td><td>조직/사용자/서비스 키</td></tr>
      <tr><td>5</td><td>TARGET_NAME</td><td>대상 명칭</td><td>VARCHAR(200)</td><td>Y</td><td></td><td></td><td></td><td>표시용 명칭</td></tr>
    </table>
  </div>
  <div class="card">
    <h2>NOTICE_TAG (공지 해시태그)</h2>
    <div class="muted">공지 해시태그</div>
    <h3>핵심 규칙/메모</h3>
    <ul>
      <li>대시보드 통계를 위한 분류용 태그(정책)</li>
    </ul>
    <h3>컬럼 요약</h3>
    <table>
      <tr>
        <th style="width:50px;">No</th>
        <th style="width:220px;">컬럼명</th>
        <th style="width:180px;">한글명</th>
        <th style="width:140px;">타입</th>
        <th style="width:80px;">NULL</th>
        <th style="width:70px;">PK</th>
        <th style="width:240px;">FK</th>
        <th style="width:120px;">기본값</th>
        <th>설명</th>
      </tr>
      <tr><td>1</td><td>TAG_ID</td><td>태그 ID</td><td>BIGSERIAL</td><td>N</td><td>Y</td><td></td><td>자동</td><td>태그 식별자(PK)</td></tr>
      <tr><td>2</td><td>NOTICE_ID</td><td>공지 ID</td><td>BIGINT</td><td>N</td><td></td><td>NOTICE_BASE.NOTICE_ID</td><td></td><td>공지 참조(FK)</td></tr>
      <tr><td>3</td><td>TAG_VALUE</td><td>해시태그</td><td>VARCHAR(50)</td><td>N</td><td></td><td></td><td></td><td>예: 인프라작업/점검/장애</td></tr>
    </table>
  </div>
  <div class="card">
    <h2>NOTICE_ATTACHMENT (공지 첨부 파일)</h2>
    <div class="muted">공지 첨부 파일</div>
    <h3>핵심 규칙/메모</h3>
    <ul>
      <li>첨부 파일은 메타데이터만 저장하고 실제 파일은 스토리지에 보관(정책)</li>
    </ul>
    <h3>컬럼 요약</h3>
    <table>
      <tr>
        <th style="width:50px;">No</th>
        <th style="width:220px;">컬럼명</th>
        <th style="width:180px;">한글명</th>
        <th style="width:140px;">타입</th>
        <th style="width:80px;">NULL</th>
        <th style="width:70px;">PK</th>
        <th style="width:240px;">FK</th>
        <th style="width:120px;">기본값</th>
        <th>설명</th>
      </tr>
      <tr><td>1</td><td>ATTACHMENT_ID</td><td>첨부 파일 ID</td><td>BIGSERIAL</td><td>N</td><td>Y</td><td></td><td>자동</td><td>첨부 파일 식별자(PK)</td></tr>
      <tr><td>2</td><td>NOTICE_ID</td><td>공지 ID</td><td>BIGINT</td><td>N</td><td></td><td>NOTICE_BASE.NOTICE_ID</td><td></td><td>공지 참조(FK)</td></tr>
      <tr><td>3</td><td>FILE_NAME</td><td>파일명</td><td>VARCHAR(255)</td><td>N</td><td></td><td></td><td></td><td>첨부 파일명</td></tr>
      <tr><td>4</td><td>SIZE_BYTES</td><td>파일 크기(Byte)</td><td>BIGINT</td><td>N</td><td></td><td></td><td></td><td>첨부 파일 크기</td></tr>
      <tr><td>5</td><td>STORAGE_KEY</td><td>파일 저장 키</td><td>VARCHAR(300)</td><td>N</td><td></td><td></td><td></td><td>저장소 경로/키</td></tr>
    </table>
  </div>
  <div class="card">
    <h2>코드/상태값 정의</h2>
    <h3>NOTICE_LEVEL</h3>
    <table>
      <tr><th style="width:160px;">값</th><th>의미</th></tr>
      <tr><td>L1</td><td>일반 공지</td></tr>
      <tr><td>L2</td><td>중요 공지</td></tr>
      <tr><td>L3</td><td>긴급 공지</td></tr>
    </table>
    <h3>NOTICE_STATUS</h3>
    <table>
      <tr><th style="width:160px;">값</th><th>의미</th></tr>
      <tr><td>DRAFT</td><td>임시저장</td></tr>
      <tr><td>PENDING</td><td>승인대기</td></tr>
      <tr><td>APPROVED</td><td>승인완료</td></tr>
      <tr><td>SENT</td><td>발송완료</td></tr>
      <tr><td>FAILED</td><td>발송실패</td></tr>
      <tr><td>COMPLETED</td><td>완료</td></tr>
    </table>
  </div>

  <div class="card">
    <h2>부록: 네이밍 변경표</h2>
    <table>
      <tr><th style="width:180px;">이전(v1.0)</th><th style="width:220px;">중간(v1.1)</th><th>현재(v1.2)</th></tr>
      <tr><td>TB_NOTICE</td><td>공지_공지기본</td><td>NOTICE_BASE</td></tr>
      <tr><td>TB_APPROVAL</td><td>공지_승인</td><td>NOTICE_APPROVAL</td></tr>
      <tr><td>TB_SEND_PLAN</td><td>공지_발송계획</td><td>NOTICE_SEND_PLAN</td></tr>
      <tr><td>TB_DELIVERY_RECORD</td><td>공지_발송이력</td><td>NOTICE_DELIVERY_LOG</td></tr>
      <tr><td>TB_CALENDAR_EVENT_LINK</td><td>공지_캘린더이벤트</td><td>NOTICE_CALENDAR_EVENT</td></tr>
      <tr><td>TB_NOTICE_TARGET</td><td>공지_수신대상</td><td>NOTICE_TARGET</td></tr>
      <tr><td>TB_NOTICE_TAG</td><td>공지_해시태그</td><td>NOTICE_TAG</td></tr>
      <tr><td>TB_NOTICE_ATTACHMENT</td><td>공지_첨부파일</td><td>NOTICE_ATTACHMENT</td></tr>
    </table>
  </div>
</div>
</body>
</html>
