<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>공지관리 시스템 요구사항 정의서</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Malgun Gothic", Arial, sans-serif;
      margin: 0;
      background: #f6f7f9;
      color: #111;
      line-height: 1.6;
    }
    .container {
      max-width: 980px;
      margin: 0 auto;
      padding: 28px 18px 60px;
    }
    h1 {
      font-size: 22px;
      margin-bottom: 6px;
    }
    h2 {
      margin-top: 28px;
      font-size: 18px;
      border-bottom: 2px solid #ddd;
      padding-bottom: 6px;
    }
    h3 {
      margin-top: 18px;
      font-size: 15px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      background: #fff;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 10px;
      vertical-align: top;
      font-size: 13px;
    }
    th {
      background: #f0f2f5;
      text-align: left;
    }
    .note {
      background: #eef2ff;
      border: 1px solid #d6dcff;
      padding: 12px;
      border-radius: 8px;
      margin-top: 10px;
      font-size: 13px;
      color:#222;
    }
    .small {
      color: #555;
      font-size: 12px;
    }
    .badge {
      display:inline-block;
      padding:2px 8px;
      border-radius:999px;
      background:#f0f2f5;
      border:1px solid #ddd;
      font-size:12px;
      margin-right:6px;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>공지관리 시스템 요구사항 정의서</h1>
    <p class="small">
      본 문서는 공지관리 시스템 구축을 위한 사용자 요구사항(UR), 기능 요구사항(FR), 도메인 정책/업무 규칙(DPR),
      비기능 요구사항(NFR)을 정의한다.
    </p>

    <h2>문서 이력 (Version History)</h2>
    <table>
      <tr>
        <th>버전</th>
        <th>일자</th>
        <th>작성자</th>
        <th>변경 내용</th>
      </tr>
      <tr>
        <td>v1.0</td>
        <td>2026-01-02</td>
        <td>함윤식</td>
        <td>공지관리 시스템 요구사항 정의서 최초 작성</td>
      </tr>
      <tr>
        <td>v1.1</td>
        <td>2026-01-07</td>
        <td>함윤식</td>
        <td>
          DPR 섹션 추가(정책/업무 규칙 분리),
          NFR 재정리(품질/운영 중심으로 정리),
          기존 NFR-02(승인 필수)는 DPR로 이동
        </td>
      </tr>
    </table>

    <h2>1. 개요</h2>
    <table>
      <tr><th>항목</th><th>내용</th></tr>
      <tr><td>시스템 명</td><td>공지관리 시스템</td></tr>
      <tr><td>목적</td><td>무분별한 공지 메일 발송을 방지하고, 승인 기반의 공지 발송 및 캘린더 연동 체계를 수립한다.</td></tr>
      <tr><td>주요 기능</td><td>공지 등록, 승인, 발송 계획 관리, 메일 발송, 캘린더 등록, 대시보드 제공</td></tr>
      <tr><td>대상 사용자</td><td>공지 작성자, 승인 관리자, 일반 사용자</td></tr>
    </table>

    <h2>2. 업무 범위</h2>
    <table>
      <tr><th>구분</th><th>설명</th></tr>
      <tr><td>포함</td><td>공지 등록/수정, 승인 관리, 발송 일정 관리, Outlook 캘린더 연동, 발송 결과 조회</td></tr>
      <tr><td>제외</td><td>Outlook 외 메신저 시스템의 실제 발송 구현 (연계 가이드 제공만 포함)</td></tr>
    </table>

    <h2>3. 사용자 요구사항 (UR)</h2>
    <div class="note">
      <span class="badge">가이드</span>
      UR은 사용자(현업) 관점의 "원하는 행위/목표"를 정의한다.
      단, "~~후에만 가능"과 같은 강한 제약은 4-1의 DPR(업무 규칙)로도 함께 정의한다.
    </div>
    <table>
      <tr><th>ID</th><th>요구사항</th></tr>
      <tr><td>UR-01</td><td>사용자는 공지를 등록할 수 있어야 한다.</td></tr>
      <tr><td>UR-02</td><td>공지는 승인 완료 후에만 발송되어야 한다.</td></tr>
      <tr><td>UR-03</td><td>사용자는 공지 발송 일시를 예약할 수 있어야 한다.</td></tr>
      <tr><td>UR-04</td><td>동일 발송 시각의 공지는 묶음으로 발송할 수 있어야 한다.</td></tr>
      <tr><td>UR-05</td><td>공지 발송 시 Outlook 캘린더에 자동 등록되어야 한다.</td></tr>
      <tr><td>UR-06</td><td>사용자는 캘린더 화면에서 공지 일정을 확인할 수 있어야 한다.</td></tr>
    </table>

    <h2>4. 기능 요구사항 (FR)</h2>

    <h3>4.1 공지 등록</h3>
    <table>
      <tr><th>ID</th><th>내용</th></tr>
      <tr><td>FR-01</td><td>공지 유형은 외부 시스템(ASKME)으로 수집된 목록 나열, 서비스 목록을 조회하여 선택한다.</td></tr>
      <tr><td>FR-02</td><td>발신 부서는 로그인 사용자 기준으로 자동 입력된다.</td></tr>
      <tr><td>FR-03</td><td>수신 대상(법인/부서/사용자/서비스)은 복수 선택이 가능해야 한다.</td></tr>
      <tr><td>FR-04</td><td>공지에는 해시태그를 등록할 수 있어야 한다.</td></tr>
    </table>

    <h3>4.2 승인 관리</h3>
    <table>
      <tr><th>ID</th><th>내용</th></tr>
      <tr><td>FR-05</td><td>공지 등록 시 승인 담당자에게 알림이 자동 발송되어야 한다.</td></tr>
      <tr><td>FR-06</td><td>승인 담당자는 공지를 승인 또는 반려할 수 있어야 한다.</td></tr>
      <tr><td>FR-07</td><td>승인 이력은 시스템에 저장되어야 한다.</td></tr>
    </table>

    <h3>4.3 발송 및 연동</h3>
    <table>
      <tr><th>ID</th><th>내용</th></tr>
      <tr><td>FR-08</td><td>공지 발송은 즉시 또는 예약 방식으로 수행할 수 있어야 한다.</td></tr>
      <tr><td>FR-09</td><td>공지 발송 결과(성공/실패)는 조회 가능해야 한다.</td></tr>
      <tr><td>FR-10</td><td>공지 발송 시 Outlook 공지 자원 캘린더에 일정이 생성되어야 한다.</td></tr>
    </table>

    <!-- ✅ A안 핵심: DPR 섹션 추가 -->
    <h2>4-1. 도메인 정책 / 업무 규칙 (DPR)</h2>
    <div class="note">
      <span class="badge">왜 분리?</span>
      DPR은 기능(화면/버튼)이 아니라, 업무 세계에서 "반드시 지켜야 하는 규칙"이다.
      테스트/검수/운영 기준이 되며, 시스템 어디에서 호출해도 위반되지 않도록 강제되어야 한다.
      <br/><br/>
      <span class="badge">참고</span>
      UR-02와 같은 문장은 사용자 관점(UR)이면서 동시에 정책(DPR)이기도 하므로,
      본 섹션에서 정책으로 재정의하여 중복 혼선을 줄인다.
    </div>

    <table>
      <tr>
        <th style="width:110px;">ID</th>
        <th>정책/규칙</th>
        <th style="width:220px;">관련 요구사항</th>
      </tr>

      <tr>
        <td>DPR-01</td>
        <td><b>승인 전 공지는 발송할 수 없다.</b> (승인 상태가 APPROVED인 경우에만 발송 가능)</td>
        <td>UR-02, FR-06</td>
      </tr>

      <tr>
        <td>DPR-02</td>
        <td><b>반려된 공지는 발송할 수 없다.</b> (반려 시 작성자가 수정 후 재승인 절차를 거친다)</td>
        <td>FR-06, FR-07</td>
      </tr>

      <tr>
        <td>DPR-03</td>
        <td><b>종료된 공지는 수정할 수 없다.</b> (게시 종료 이후 제목/내용/대상/발송계획 변경 금지)</td>
        <td>UR-01, FR-01~FR-04</td>
      </tr>

      <tr>
        <td>DPR-04</td>
        <td><b>예약 발송 시각은 현재 시각 이후여야 한다.</b> (과거 시각 예약 금지)</td>
        <td>UR-03, FR-08</td>
      </tr>

      <tr>
        <td>DPR-05</td>
        <td><b>동일 발송 시각의 공지는 묶음 발송할 수 있다.</b> (묶음 기준/정책은 운영자가 설정할 수 있다)</td>
        <td>UR-04, FR-08</td>
      </tr>

      <tr>
        <td>DPR-06</td>
        <td><b>발송이 완료된 공지는 발송계획을 변경할 수 없다.</b> (재발송은 별도 공지로 처리)</td>
        <td>FR-08, FR-09</td>
      </tr>

      <tr>
        <td>DPR-07</td>
        <td><b>Outlook 캘린더 연동 대상인 공지는 캘린더 링크가 누락된 상태로 완료 처리할 수 없다.</b></td>
        <td>UR-05, FR-10</td>
      </tr>

      <tr>
        <td>DPR-08</td>
        <td><b>승인/반려 이력은 변경 불가(append-only)로 기록되어야 한다.</b> (감사/추적 목적)</td>
        <td>FR-07</td>
      </tr>
    </table>

    <div class="note">
      <span class="badge">Open Issue</span>
      "긴급공지(L3)는 승인 없이 발송 가능" 같은 예외 정책은 DPR로 고정하지 말고 Open Issue로 남기는 것이 안전하다.
      (정책 확정 시 DPR 항목으로 승격)
    </div>

    <!-- ✅ NFR 재정리 -->
    <h2>5. 비기능 요구사항 (NFR)</h2>
    <div class="note">
      <span class="badge">원칙</span>
      NFR은 "승인 필수" 같은 업무 규칙이 아니라,
      보안/성능/운영/가용성/호환성 등 시스템 품질 기준을 정의한다.
      (기존 NFR-02는 DPR-01로 이동)
    </div>

    <table>
      <tr><th style="width:110px;">ID</th><th>내용</th></tr>

      <tr>
        <td>NFR-01</td>
        <td>시스템은 Java 및 PostgreSQL 환경에서 동작해야 한다.</td>
      </tr>

      <tr>
        <td>NFR-02</td>
        <td>사용자 인증은 사내 인증 체계(SSO 또는 사내 계정) 기반으로 적용되어야 하며, 권한(작성/승인/열람)은 역할 기반으로 통제되어야 한다.</td>
      </tr>

      <tr>
        <td>NFR-03</td>
        <td>중요 이벤트(공지 등록/수정/승인/반려/발송/실패/재시도)는 감사 로그로 남아야 하며, 로그는 운영 정책에 따라 일정 기간 보관되어야 한다.</td>
      </tr>

      <tr>
        <td>NFR-04</td>
        <td>발송 실패 시 재시도가 가능해야 하며, 재시도는 중복 발송을 방지하도록 설계되어야 한다(멱등성/중복 방지 기준 포함).</td>
      </tr>

      <tr>
        <td>NFR-05</td>
        <td>외부 연동(Graph API 등) 장애 시에도 공지 데이터는 유실되지 않아야 하며, 실패 건은 재처리 가능해야 한다(재처리 큐/상태 관리).</td>
      </tr>

      <tr>
        <td>NFR-06</td>
        <td>동시 발송/대량 수신자 처리 시에도 시스템이 정상 동작해야 하며, 처리 성능 목표(예: N명 기준 처리 시간)는 운영 합의 후 확정한다.</td>
      </tr>
    </table>

    <h2>6. 참고 사항</h2>
    <div class="note">
      본 요구사항 정의서는 도메인 정책(DPR) 및 ERD 산출물과 연계하여 작성되었으며,
      세부 연계 방식(Graph API 필드 매핑, 캘린더 제목 규칙, 리소스 캘린더 선택 기준 등)은 별도의 연계 설계 문서에서 정의한다.
    </div>

  </div>
</body>
</html>
